<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Análisis de Caudal | Daniel Pomboza</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #e67e22;
            --glass-bg: rgba(255, 255, 255, 0.75); 
            --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2);
        }

        /* --- NUEVAS ANIMACIONES PARA LA INTRO --- */
        @keyframes fadeOutIntro {
            0% { opacity: 1; visibility: visible; }
            80% { opacity: 1; }
            100% { opacity: 0; visibility: hidden; }
        }

        @keyframes titleAppears {
            0% { opacity: 0; transform: scale(0.8); filter: blur(10px); }
            50% { opacity: 1; transform: scale(1); filter: blur(0px); }
            100% { opacity: 0; transform: scale(1.1); filter: blur(5px); }
        }

        /* Animaciones originales ajustadas con más retraso */
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes zoomIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Pantalla de Intro */
        .intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeOutIntro 4s forwards;
        }

        .intro-screen h1 {
            color: white;
            font-size: 2.5rem;
            text-align: center;
            padding: 20px;
            animation: titleAppears 3.5s ease-in-out forwards;
            max-width: 80%;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            display: flex; 
            background: linear-gradient(rgba(0,0,0,0.45), rgba(0,0,0,0.45)), 
                        url('photo-1611440052868-58b551b07e2c.avif') no-repeat center center fixed; 
            background-size: cover;
            min-height: 100vh;
        }

        /* Sidebar con delay para esperar a la intro */
        .sidebar { 
            width: 300px; 
            background: rgba(0, 0, 0, 0.65); 
            backdrop-filter: blur(15px); 
            -webkit-backdrop-filter: blur(15px);
            color: white; 
            padding: 30px; 
            height: 100vh; 
            position: fixed; 
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideInLeft 0.8s ease-out 3.8s both;
        }

        .sidebar h2 { color: var(--accent); border-bottom: 2px solid var(--accent); padding-bottom: 10px; }

        .main-content { margin-left: 360px; padding: 40px; width: calc(100% - 400px); }

        /* Ajuste de delays para que aparezcan después de la intro */
        .header { 
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--glass-shadow);
            animation: fadeInUp 0.8s ease-out 4s both; 
        }

        .grid-results { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px; 
            margin-bottom: 30px;
            animation: fadeInUp 0.8s ease-out 4.2s both; 
        }

        .card { 
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            border-top: 5px solid var(--accent);
            box-shadow: var(--glass-shadow);
        }

        #chart { 
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--glass-shadow);
            animation: fadeInUp 0.8s ease-out 4.4s both; 
        }

        .sidebar-img { 
            width: 100%; border-radius: 10px; margin-top: 20px; 
            border: 2px solid var(--accent);
            animation: zoomIn 1s ease-out 4.6s both;
        }

        h1 { margin: 0; color: var(--primary); font-weight: 800; }
        .card h3 { margin: 0; color: #333; font-size: 0.9rem; text-transform: uppercase; font-weight: bold; }
        .card .value { font-size: 1.8rem; font-weight: 800; color: var(--primary); margin: 10px 0; }
    </style>
</head>
<body>

    <div class="intro-screen">
        <h1>Cálculo del caudal total de agua en un canal</h1>
    </div>

    <div class="sidebar">
        <h2>Proyecto Final</h2>
        <p><b>Autores:</b> Daniel Pomboza, Estiven Martinez y Santiago Paca</p>
        <p><b>Carrera:</b> Ciencia de datos e Inteligencia Artificial</p>
        <hr style="opacity: 0.2">
        <p><b>Tema:</b> Cálculo del caudal total de agua en un canal mediante integración numérica.</p>
        <p style="font-size: 0.85rem; color: #ecf0f1; line-height: 1.4;">Este software utiliza los métodos de Simpson 1/3 y Cuadratura Gaussiana para verificar el flujo hídrico.</p>
        <img src="ajuste_caudalimetro_ultrasonico_canal_parshall.jpeg" alt="Canal" class="sidebar-img">
    </div>
    
    <div class="main-content">
        <div class="header">
            <h1>Panel de Análisis Hidráulico</h1>
            <p style="color: #444; margin: 5px 0 0 0;">Monitoreo de resultados: Analítica vs. Métodos Numéricos</p>
        </div>

        <div class="grid-results">
            <div class="card">
                <h3>Simpson 1/3</h3>
                <div class="value" id="val-simpson">--</div>
                <small style="font-weight: 600; color: #555;">Error: 0%</small>
            </div>
            <div class="card">
                <h3>Gauss (n=2)</h3>
                <div class="value" id="val-gauss">--</div>
                <small style="font-weight: 600; color: #555;">Error: 0%</small>
            </div>
            <div class="card" style="border-top-color: #27ae60;">
                <h3>Valor Real</h3>
                <div class="value" style="color: #27ae60;">1.3728 m³/s</div>
                <small style="font-weight: 600; color: #555;">Integral Analítica</small>
            </div>
        </div>

        <div id="chart"></div>
    </div>

    <script>
        const h = 0.8;
        const b = 1.2;
        const f = (y) => (2.4 * Math.pow(y, 2) + 1.2) * b;

        const simpson = (h/6) * (f(0) + 4*f(0.4) + f(0.8));
        const y1 = 0.4 * (-0.57735) + 0.4;
        const y2 = 0.4 * (0.57735) + 0.4;
        const gauss = 0.4 * (1 * f(y1) + 1 * f(y2));

        document.getElementById('val-simpson').innerText = simpson.toFixed(4) + " m³/s";
        document.getElementById('val-gauss').innerText = gauss.toFixed(4) + " m³/s";

        let yArr = [], vArr = [];
        for(let i=0; i<=0.81; i+=0.02) {
            yArr.push(i);
            vArr.push(f(i));
        }

        const data = [{
            x: yArr, y: vArr,
            fill: 'tozeroy', type: 'scatter', mode: 'lines',
            name: 'Curva de Caudal', line: {color: '#2c3e50', width: 3, shape: 'spline'}
        }, {
            x: [0, 0.4, 0.8], y: [f(0), f(0.4), f(0.8)],
            mode: 'markers', name: 'Simpson', marker: {color: '#e67e22', size: 10}
        }, {
            x: [y1, y2], y: [f(y1), f(y2)],
            mode: 'markers', name: 'Gauss', marker: {color: '#27ae60', size: 12, symbol: 'diamond'}
        }];

        const layout = {
            xaxis: {title: 'Profundidad (y) m', gridcolor: 'rgba(0,0,0,0.1)'},
            yaxis: {title: 'Caudal (m³/s)', gridcolor: 'rgba(0,0,0,0.1)'},
            plot_bgcolor: "rgba(0,0,0,0)", 
            paper_bgcolor: "rgba(0,0,0,0)",
            font: { color: '#333' }
        };

        Plotly.newPlot('chart', data, layout);
    </script>
</body>
</html>
